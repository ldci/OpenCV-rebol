#! /usr/bin/rebolREBOL [	Title:		"OpenCV Tests: Split and Merge"	Author:		"François Jouen"	Rights:		"Copyright (c) 2012-2014 François Jouen. All rights reserved."	License:    "BSD-3 - https://github.com/dockimbel/Red/blob/master/BSD-3-License.txt"]do %../opencv.rset 'appDir what-dir ;picture:  to-string to-local-file join appDir "images/lena.tiff"print "Select a picture"temp: request-file picture: to-string to-local-file to-string tempwindowsName: "Original Image [ESC to Quit]"print ["Loading an image"]cvNamedWindow windowsName CV_WINDOW_AUTOSIZE ; create window ; we use 3 channels 8-bit image !img: cvLoadImage picture CV_LOAD_IMAGE_COLOR; creates 3 images for RGB planes since we don't use alpha channels0: cvCreateImage img/width img/height IPL_DEPTH_8U 1s1: cvCreateImage img/width img/height IPL_DEPTH_8U 1s2: cvCreateImage img/width img/height IPL_DEPTH_8U 1;make windowscvNamedWindow "s0" CV_WINDOW_AUTOSIZEcvNamedWindow "s1" CV_WINDOW_AUTOSIZEcvNamedWindow "s2" CV_WINDOW_AUTOSIZE; split image into 3 planes and show imagescvSplit img  s0 s1 s2 nonecvShowImage "s0" s0cvShowImage "s1" s1cvShowImage "s2" s2; show imagescvShowImage windowsName img cvMoveWindow windowsName  100 40cvMoveWindow "s0"  120 100cvMoveWindow "s1"  140 200cvMoveWindow "s2"  160 300; now reverse operation : cvMerge from planes to 1 imageimg2: cvCreateImage img/width img/height 8 3&img2: struct-address? img2cvMerge s0 s1 s2 none img2cvNamedWindow "Merged Image" CV_WINDOW_AUTOSIZEcvShowImage "Merged Image" img2cvMoveWindow "Merged Image"  180 400cvWaitKey 0cvWaitKey 0cvDestroyAllWindows cvReleaseImage img ; release image pointercvReleaseImage s0cvReleaseImage s1cvReleaseImage s2cvReleaseImage img2print "Done"